VXI-11通信プロトコルの紹介
C#

VXI-11（ぶいえっくすあいいれぶん）はオシロスコープ等の電子計測器の制御に使われるイーサネット通信プロトコルです。VXI-11 を理解するには、電子計測器の通信インタフェースとして使われる GP-IB（じーぴーあいびー）と、ネットワーク通信プロトコルの RPC（あーるぴーしー） の知識を前提とします。そこでまず GP-IB と RPC を説明し、次に VXI-11 の概要を説明します。対象読者としてイーサネットの基本（ツイストペア結線、IPアドレスとTCP ポート番号）を知っている18歳の新人技術者を想定しています。

# GP-IB について

GP-IB はデジタルマルチメータや信号発生器を制御するために1960年代に設計された通信規格です。コネクタや電気信号のタイミングを規定した [IEEE488.1-1978](https://standards.ieee.org/ieee/488/6465/)(あいとりぷるいーよんはちはちぽいんとわん、通称ぽいんとわん) と、ソフトウェアによる処理を想定し、コマンド形式や共通コマンドを規定した [IEEE488.2-1987](https://standards.ieee.org/ieee/488.2/717/)(あいとりぷるいーよんはちはちぽいんとつー、通称ぽいんとつー)  の２つの仕様があります。最新版は [IEEE/IEC 60488-1-2004](https://standards.ieee.org/ieee/60488-1/3686/) と [IEEE/IEC 60488-2-2004](https://standards.ieee.org/ieee/60488-2/3632/) です。

GP-IB は24ピンの頑丈なコネクタでねじ止めするため、断線トラブルや引き抜きトラブルがありません。また制御信号はグランド線とツイストぺアで配線されており電子ノイズに強く、三線式ハンドシェークによりトラブル発生時の原因の特定が容易なため、高い信頼性が必要な工場の生産ラインの通信方式として利用されます。

GP-IB の特徴的な用語を説明します。

### リモート
(TODO)
### トリガ
(TODO)
### デバイスクリア
(TODO)
### サービスリクエスト
(TODO)
### ステータスバイト
(TODO)
### *IDN?コマンド
(TODO)
### インタラプトエラー
(TODO)

# RPCについて

RPC はイーサネット経由で遠隔地にあるコンピュータを制御するために1980年代に実用化された通信プロトコルです。トランスポート層に TCP と UDP を採用し、セッション層に RPC があります。[RFC 1831](https://www.rfc-editor.org/rfc/rfc1831) というインターネット規格になっています。

RPC の用語を説明します
### サーバ、クライアント
(TODO)
### CALL、REPLY
(TODO)
### プログラム番号、プログラムバージョン
(TODO)
### 認証機構、perf verif
(TODO)
### ステータス、エラーコード
(TODO)
### ポートマッパ
(TODO)
### 任意長データ
(TODO)

# VXI-11について

VXI-11 は　GP-IB の機能をイーサネット通信で実現するために、1990年代に測定器業界団体が作った [VXI-11 REVISION 1.0](https://www.vxibus.org/specifications.html) という規格です。トランスポート層に TCP、セッション層に RPC を利用し、プレゼンテーション層に VXI-11 が位置します。IEEE488.1 に相当する VXI-11.2、IEEE488.2 に相当する VXI-11.3 の２つの仕様書に分かれています。

VXI-11の特徴を以下にあげます。

### コアチャネル、インタラプトチャネル、アボートチャネル
(TODO)
### ロック
(TODO)
### 関数一覧表
(TODO)

# VXI-11.Netについて

VXI-11.NET はクラスルームでの学習を対象とする、VXI-11通信ソフトウェアです。サーバアプリケーションとクライアントアプリケーションがあります。２つのアプリケーション間の通信内容を パケットキャプチャソフトの Wireshark でモニタする事で通信のシーケンスを見ることができます。
- https://github.com/mitakalab1/VXI-11.Net

# VXI-11 の周辺規格について

VXI-11 と関連するいくつかの規格があります。主な規格を手短に紹介します。

### VXI-1 から VXI-11.1
1995年に Natinal Instruments が中心になって策定した、パソコンベースのモジュール型計測器の仕様です。VMEバスをモジュール間通信規格とし、筐体の大きさや搭載ソフト（DOS)を規定しています。今は後継の [PXI Specifications](https://www.pxisa.org/) に置き換わっています。 

### HiSLIPプロトコル
2020年に測定器業界団体が策定した、VXI-11 の後継のイーサネット通信プロトコルです。10Gイーサネット等の高速通信を想定した非同期動作モードがあります。規格書は [IVI-6.1: High-Speed LAN Instrument Protocol（HiSLIP)](https://www.ivifoundation.org/specifications/) です。

### VISA ライブラリ
1995年に測定器業界団体が策定した、GP-IB, RS-232, USB, イーサネットといった異なる通信規格に対して抽象化した同一関数でアクセスするための通信ライブラリです。VMEバスや PCI バスを想定したメモリ読み書き関数群と、GP-IB や VXI-11 を対象とするメッセージ送受信関数群があります。規格書は [VPP-4.3: The VISA Library](https://www.ivifoundation.org/specifications/) です。

### SCPI コマンド
1999年に測定器業界団体が策定した、オシロスコープ、デジタルマルチメータ、任意信号発生器などの製品カテゴリ毎の共通コマンドの書式や引数の仕様です。規格書は [Standard Commands for Programmable Instruments-1999](https://www.ivifoundation.org/specifications/) です。

### IVI ドライバ
1998年に測定器業界団体が策定した、SCPI 準拠機器を制御するC言語/C++(COM)の関数ライブラリ仕様です。各社の測定器の振る舞いを抽象化し仮想測定器クラスによるPC上でのシミュレーション動作に対応しています。規格書表題は [IVI Specifications](https://www.ivifoundation.org/specifications/) です。

# 参考文献

もっと詳しく知りたい人のために日本語の解説記事を挙げます。
- [GPIB通信の基礎知識と用語集](https://www.contec.com/jp/support/basic-knowledge/daq-control/gpib-communication/)
